<wb-page #page (wbPress)="page.toggleHeaderExtension(false)" [wbPressStop]="false">
  <wb-page-header (wbPress)="page.toggleHeaderExtension()">
    <div class="user-profile">
      <div class="avatar-wrapper" wbPressLink="/user-profile">
        <span class="avatar" [style.backgroundImage]="'url(https://picsum.photos/128/128)'"></span>
      </div>
      <div class="meta">
        <span class="meta-item nickname">狮子哥哥</span>
        <span class="meta-item tagline">时光在飞逝，生命知多少.</span>
      </div>
    </div>
    <div class="toolbar">
      <span class="time"></span>
      <span class="icon more"></span>
    </div>
  </wb-page-header>
  <wb-page-header-extension>
    <button wbPressLink="/settings" class="ghost">设置</button>
  </wb-page-header-extension>

  <wb-page-content>
    <div class="content-top" *ngIf="stats$ | async as stats">
      <wb-glance-view-collection-selector></wb-glance-view-collection-selector>
      <wb-glance-view-progress
        title="总体进度"
        [info]="stats.collectionStudied + '/' + stats.collectionTotal"
        [percentage]="overallProgressPercentage$ | async"
        [pendingPercentage]="overallProgressPendingPercentage$ | async">
      </wb-glance-view-progress>
      <wb-glance-view-progress
        title="今日进度"
        [info]="'已学习 ' + (todayStudyTimeInMinutes$ | async) + ' 分钟'"
        [percentage]="todayProgressPercentage$ | async"
        [pendingPercentage]="todayProgressPendingPercentage$ | async">
      </wb-glance-view-progress>

      <div class="progress-details">
        <wb-glance-view-progress-simple
          title="新学"
          [done]="stats.todayNew"
          [total]="todayNewGoal$ | async">
        </wb-glance-view-progress-simple>
        <wb-glance-view-progress-simple
          title="复习"
          [done]="stats.todayReviewed"
          [total]="stats.todayReviewGoal">
        </wb-glance-view-progress-simple>
        <wb-glance-view-progress-simple
          title="生词本"
          [done]="stats.wordsbookTodayNew"
          [total]="stats.wordsbookTotal">
        </wb-glance-view-progress-simple>
      </div>
    </div>

    <div class="content-bottom">
      <wb-glance-view-recent-study></wb-glance-view-recent-study>
    </div>
  </wb-page-content>

  <wb-page-footer>
    <div class="flex-row buttons-wrapper">
    </div>

    <button wbPressLink="/study">开始学习</button>
  </wb-page-footer>
</wb-page>
